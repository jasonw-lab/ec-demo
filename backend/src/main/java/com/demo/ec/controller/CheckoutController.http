### CheckoutController API test using IntelliJ HTTP Client
### How to use:
### 1) Start the Spring Boot app (EcBackendApplication) on http://localhost:8080
### 2) In IntelliJ IDEA, open this file and click the green gutter icons to run requests sequentially
### 3) Run Step 1 to create an order. Copy the "orderId" from the JSON response.
### 4) Set {{orderId}} variable (either at top or inline) and run subsequent steps.

@host = http://localhost:8080
@contentType = application/json
# Optionally set orderId here after running the first request (uncomment next line and paste):
# orderId = <paste-order-id-here>

### Step 1: Create an order (checkout)
POST {{host}}/api/checkout
Content-Type: {{contentType}}

{
  "customerName": "Taro Yamada",
  "customerEmail": "taro@example.com",
  "items": [
    { "productId": "1", "quantity": 1 },
    { "productId": "2", "quantity": 2 }
  ]
}

### Step 2: Get QR Code / payment URL for the created order
# Replace the orderId variable with the value from Step 1, or define it at the top
GET {{host}}/api/payments/{{orderId}}/qrcode

### Step 3: Get current order status (includes PayPay status if available)
GET {{host}}/api/orders/{{orderId}}

### Step 4: Simulate payment success (for demo/testing)
POST {{host}}/api/payments/{{orderId}}/simulate-success

### Step 5: Get order status again (should be PAID after simulation)
GET {{host}}/api/orders/{{orderId}}
