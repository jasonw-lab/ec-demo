# ec-demo 開発標準ガイドライン

本プロジェクトは、大規模マイクロサービスにおける開発効率とメンテナンス性を両立させるため、以下の設計基準を定めます。

## 1. アーキテクチャの方針
理論上の理想（Over-Engineering）を避け、実務における変更のしやすさを重視した **Hybrid Hexagonal Architecture** を採用します。

### レイヤーの責務
- **Web (web)**: REST APIの終端。HTTPプロトコルの解釈とバリデーションに専念する。
- **Application (application)**: 特定のユースケース（業務フロー）を記述。ドメインオブジェクトを組み合わせて一つの機能を完成させる。
- **Domain (domain)**: 外部依存を持たない純粋なビジネスロジック。フレームワークの変更に左右されない「不変のロジック」をここに集約する。
- **Gateway (gateway)**: データベースや外部マイクロサービスとの通信インターフェースおよびその実装を管理する。

## 2. 依存関係の黄金律
- 依存は常に `domain` に向かって一方向であること。
- `domain` パッケージが、WebフレームワークやDBライブラリに依存することを禁止する。
- サービス間の通信は、`libs/` の共通DTOではなく、各サービスが定義するAPIコントラクトに従うこと。

## 3. 分散システムの一貫性管理
- 分散トランザクションが必要なコア業務には **Seata (AT/TCC/Saga)** を適切に選択する。
- 結果整合性で許容される通知系処理には **Kafka** を用いたイベント駆動モデルを採用する。

## 4. AI共創開発 (AI-Driven Development)
- 本プロジェクトはAIを Thought Partner として活用する。
- 複雑な機能実装を行う際は、まず `docs/adr/` に設計意図を記録し、AIにそのコンテキストを共有してからコーディングを開始すること。



## 5. ドキュメントと設計記録


## その他
TODO: 今後追加予定
- コーディング規約
- テスト戦略
- CI/CDパイプライン設計
- セキュリティガイドライン